 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Device Management</title>
</head>
<body>
    <h1>Device Management</h1>
    <h2>Devices</h2>
    <ul>
        {% for device, details in devices.items() %}
            <li>{{ device }} (IP: {{ details.ip }}): {{ details.get('status', details.get('level', details.get('message', ''))) }}</li>
        {% endfor %}
    </ul>

    <h2>Alerts</h2>
    <ul>
        {% for alert in alerts %}
            <li>{{ alert }}</li>
        {% endfor %}
    </ul>

    <h2>Update Device</h2>
    <form action="/update_device" method="post">
        <label for="device">Device:</label>
        <select name="device" id="device">
            {% for device in devices.keys() %}
                <option value="{{ device }}">{{ device }}</option>
            {% endfor %}
        </select>
        <label for="action">Action:</label>
        <select name="action" id="action">
            <option value="toggle">Toggle Status</option>
            <option value="message">Update Message (for doorbell)</option>
        </select>
        <input type="text" name="message" placeholder="Enter message (if applicable)">
        <button type="submit">Update Device</button>
    </form>

<h2>Add New Device</h2>
    <form action="/add_device" method="post">
        <label for="device_name">Device Name:</label>
        <input type="text" id="device_name" name="device_name" required>
        <label for="device_ip">Device IP Address:</label>
        <input type="text" id="device_ip" name="device_ip" required>
        <button type="submit">Add Device</button>
    </form>

    <h2>Add New Device</h2>
    <form action="/add_device" method="post">
        <label for="device_name">Device Name:</label>
        <input type="text" id="device_name" name="device_name" required>
        <label for="device_ip">Device IP Address:</label>
        <input type="text" id="device_ip" name="device_ip" required>
        <button type="submit">Add Device</button>
    </form>
</body>
</html>
